<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cristian Rojas | Portfolio</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

    <nav class="navbar-custom">
        <div class="nav-content">
            <div class="logo">Cristian Rojas Salamanca<span class="dot">.</span></div>
            
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>

            <ul class="nav-links">
                <li><a href="#inicio">Inicio</a></li>
                <li><a href="#proyectos">Experiencia</a></li>
                <li><a href="#contacto" role="button" class="outline">Contacto</a></li>
            </ul>
        </div>
    </nav>

    <main class="container">
        
        <header class="hero" id="inicio">
            <h1 class="gradient-text">Cristian Rojas Salamanca</h1>
            <p style="font-size: 1.5rem; color: var(--muted);">Planificaci√≥n Estrat√©gica & Control de Gesti√≥n | Perfil Tecnol√≥gico</p>
    
            <div class="skills-container">
                <span class="skill-badge">Control de Gesti√≥n</span>
                <span class="skill-badge">An√°lisis de Datos (SPSS/R)</span>
                <span class="skill-badge">Java / SpringBoot</span>
                <span class="skill-badge">Liderazgo de Equipos</span>
                <span class="skill-badge">Mentoring T√©cnico</span>
                <span class="skill-badge">Gesti√≥n P√∫blica</span>
            </div>
            <div class="hero-buttons">

                <a href="/assets/docs/CV_Cristian_Rojas_Salamanca_2025_portafolio.pdf" target="_blank" role="button" class="btn-primary">
                    <i class="fas fa-file-pdf"></i> Descargar CV
                </a>
                
                <a href="https://linkedin.com/in/tu-usuario" target="_blank" role="button" class="outline">
                    <i class="fab fa-linkedin"></i> LinkedIn
                </a>

                <a href="#playground" role="button" class="outline">
                    <i class="fas fa-gamepad"></i> Playground
                </a>
                <button id="btn-magic-theme" class="outline" 
                    style="border-radius: 50%; width: 50px; height: 50px; padding: 0; display: flex; align-items: center; justify-content: center; border-color: var(--muted); color: var(--muted);" 
                    title="Cambiar Tema Visual">
                    <i class="fas fa-palette"></i>
                </button>

            </div>
        </header>

        <section id="sobre-mi" style="padding-bottom: 2rem;">
            <h2 style="text-align: center;">Perfil Profesional</h2>
            <div class="grid" style="justify-items: center;">
                <p style="font-size: 1.1rem; line-height: 1.6; color: #cbd5e1; max-width: 800px; text-align: center;">
                Profesional con s√≥lida trayectoria en el sector p√∫blico y privado, especializado en la intersecci√≥n entre 
                <strong>planificaci√≥n estrat√©gica, an√°lisis de datos y tecnolog√≠a</strong>. 
                <br><br>
                Actualmente cursando un Mag√≠ster en Planificaci√≥n y Control de Gesti√≥n. 
                Mi experiencia liderando equipos de m√°s de 100 personas en proyectos cr√≠ticos (como Censo 2024) 
                se complementa con mi formaci√≥n t√©cnica como <strong>Programador Full Stack</strong>, 
                lo que me permite no solo gestionar procesos, sino dise√±ar soluciones tecnol√≥gicas para optimizarlos.
                </p>
            </div>
        </section>
        
        <section id="propuesta-valor">
            <h2 style="text-align: center; margin-bottom: 2rem;">¬øPor qu√© un perfil mixto?</h2>
            <div class="grid">
                <article style="border-left: 4px solid var(--primary);">
                    <h3 style="color: var(--primary);"><i class="fas fa-chart-line"></i> Visi√≥n Estrat√©gica</h3>
                    <p>
                        Como candidato a Mag√≠ster en Control de Gesti√≥n, entiendo de KPIs, Balanced Scorecard y planificaci√≥n financiera. No solo extraigo datos, entiendo <em>qu√©</em> mueven esos n√∫meros en la organizaci√≥n.
                    </p>
                </article>
                
                <article style="border-left: 4px solid #3b82f6;"> 
                    <h3 style="color: #3b82f6;"><i class="fas fa-database"></i> Ejecuci√≥n T√©cnica</h3>
                    <p>
                        Mi certificaci√≥n Fullstack y dominio avanzado de <strong>Oracle/SQL</strong> y <strong>R</strong> me permiten construir mis propias herramientas, automatizar reportes y dialogar fluidamente con equipos de TI.
                    </p>
                </article>
            </div>
        </section>

        <section id="proyectos">
            <h2>Trayectoria Relevante</h2>
            
            <div class="timeline">
                
                <div class="timeline-item">
                    <div class="timeline-date">2025 - Presente</div>
                    <div class="timeline-content">
                        <h3>Asistente de Tutor Full Stack Java</h3>
                        <p><strong>Bibernum para Talento Digital para Chile.</strong><br>
                        Facilitador t√©cnico y pedag√≥gico en la formaci√≥n de nuevos desarrolladores. 
                        Apoyo en la resoluci√≥n de problemas de c√≥digo (Java, SpringBoot, SQL), 
                        revisi√≥n de proyectos y mentor√≠a para asegurar la curva de aprendizaje de los estudiantes.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Abril 2024 - Presente</div>
                    <div class="timeline-content">
                        <h3>Mag√≠ster en Planificaci√≥n y Control de Gesti√≥n</h3>
                        <p>Universidad de Valpara√≠so. Enfoque en alineamiento estrat√©gico y control directivo.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">2021 - 2024</div>
                    <div class="timeline-content">
                        <h3>Coordinador Operativo & Encargado Regional (INE)</h3>
                        <p>Lider√© la operaci√≥n del Censo de Poblaci√≥n y Vivienda 2024 en Cerrillos. 
                        Responsable de un equipo de <strong>100+ personas</strong>, gesti√≥n de infraestructura, 
                        control de calidad de datos y cumplimiento de KPIs cr√≠ticos bajo plazos estrictos.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">2020</div>
                    <div class="timeline-content">
                        <h3>Formaci√≥n Full Stack Java</h3>
                        <p>Bootcamp Edutecno (Talento Digital). Desarrollo de aplicaciones web con Java, SpringBoot y Motores de Bases de Datos (Oracle/MySQL), adquiriendo la capacidad de dialogar t√©cnicamente con equipos de desarrollo.</p>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">2014 - 2018</div>
                    <div class="timeline-content">
                        <h3>Gesti√≥n P√∫blica y Fomento Productivo</h3>
                        <p>Experiencia en Municipalidad de Maip√∫ y Corp. de Lampa. 
                        Jefe de Adquisiciones y Ejecutivo de Fomento, gestionando licitaciones, 
                        fondos concursables (CORFO/SERCOTEC) y an√°lisis estad√≠stico para toma de decisiones.</p>
                    </div>
                </div>

            </div>
        </section>

        <section id="portafolio-proyectos">
            <h2 style="border-bottom: 2px solid var(--primary); display: inline-block; padding-bottom: 5px;">
                Proyectos T√©cnicos
            </h2>
            
            <div class="grid">
    
                <article class="project-card">
                    <header>
                        <span class="tag">Java SpringBoot & SQL</span>
                            <h3>Sistema de Gesti√≥n Administrativa</h3>
                    </header>
                        <p>Aplicaci√≥n web backend dise√±ada para optimizar procesos de registro. 
                        Desarrollada con <strong>Java SpringBoot</strong>, implementando seguridad, 
                        arquitectura MVC y conexi√≥n a base de datos Oracle/MySQL.</p>
                    <footer>
                        <a href="#" role="button" class="outline" style="width: 100%; opacity: 0.7;">
                        <i class="fab fa-github"></i> Ver C√≥digo (Demo)
                        </a>
                    </footer>
                </article>

                <article class="project-card">
                    <header>
                        <span class="tag">Data Science & Estad√≠stica</span>
                            <h3>Geo Muestreo Nacional</h3>
                    </header>
                        <p>Metodolog√≠a innovadora para estudios nacionales presentada en el <em>X Congreso Latinoamericano de Estad√≠stica</em>. Uso de herramientas de georreferenciaci√≥n y an√°lisis muestral para optimizar recursos en terreno.</p>
                    <footer>
                        <a href="http://conferencias.unc.edu.ar/index.php/xclatse/clatse2012/paper/view/281" target="_blank" role="button" class="outline" style="width: 100%;">
                        <i class="fas fa-book-open"></i> Ver Publicaci√≥n
                        </a>
                    </footer>
                </article>

                <article class="project-card">
                    <header>
                        <span class="tag">Gesti√≥n de Operaciones</span>
                            <h3>Liderazgo Censo 2024</h3>
                    </header>
                        <p>Coordinaci√≥n estrat√©gica de un equipo de <strong>100+ personas</strong>. 
                        Cumplimiento de KPIs de cobertura y calidad de datos mediante la implementaci√≥n de tableros de control y supervisi√≥n en terreno.</p>
                    <footer>
                        <button class="outline" disabled style="width: 100%; cursor: default; opacity: 0.5; border-color: var(--muted); color: var(--muted);">
                        <i class="fas fa-check-circle"></i> Proyecto Finalizado
                        </button>
                    </footer>
                </article>
            </div>
        </section>
<br>
<br>

<section id="playground" class="container">
    <h2><i class="fas fa-calculator"></i> Simulador de Inversi√≥n</h2>
    <p>Calcula el poder del inter√©s compuesto en tiempo real.</p>

    <article class="project-card" style="max-width: 600px; margin: 0 auto;">
        
        <div class="grid">
            <label for="input-capital">
                Capital Inicial ($)
                <input type="number" id="input-capital" placeholder="Ej: 1000000">
            </label>

            <label for="input-tasa">
                Tasa Anual (%)
                <input type="number" id="input-tasa" placeholder="Ej: 5">
            </label>
            
            <label for="input-anos">
                A√±os
                <input type="number" id="input-anos" placeholder="Ej: 10">
            </label>
        </div>

        <button id="btn-calcular" style="margin-top: 1rem; width: 100%;">
            Calcular Retorno
        </button>

        <div id="resultado" style="margin-top: 2rem; text-align: center; display: none;">
            <small>Tu capital crecer√° hasta:</small>
                <h3 style="color: var(--primary); font-size: 2rem; margin: 0; margin-bottom: 1rem;">
                    $<span id="valor-final">0</span>
                </h3>

            <div style="position: relative; height: 300px; width: 100%;">
                <canvas id="graficoInversion"></canvas>
            </div>
        </div>
    </article>
<br>
<br>
    <article class="project-card" style="max-width: 800px; margin: 3rem auto;">
    <header style="text-align: center;">
        <span class="tag">API Integration</span>
        <h3>Evaluaci√≥n de Desempe√±o Pok√©mon</h3>
        <p>Consulta la base de datos de RRHH en tiempo real.</p>
    </header>

    <div class="grid" style="grid-template-columns: 2fr 1fr; gap: 1rem; align-items: end;">
        <label>
            Nombre del Candidato (Pok√©mon)
            <input type="text" id="poke-input" placeholder="ej: pikachu, mewtwo, lucario">
        </label>
        <button id="btn-buscar-poke" class="outline">
            <i class="fas fa-search"></i> Evaluar
        </button>
    </div>

    <div id="poke-card" style="display: none; margin-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 2rem;">
        
        <div class="grid">
            <div style="text-align: center;">
                <img id="poke-img" src="" alt="Pokemon" style="width: 150px; height: 150px; filter: drop-shadow(0 0 10px rgba(142, 68, 173, 0.5));">
                <h2 id="poke-name" style="text-transform: capitalize; margin-bottom: 0;">Nombre</h2>
                <small id="poke-type" style="color: var(--primary); font-weight: bold;">TIPO</small>
            </div>

            <div>
                <label>Productividad (Ataque)</label>
                <progress id="kpi-ataque" value="0" max="150"></progress>
                
                <label>Gesti√≥n de Crisis (Defensa)</label>
                <progress id="kpi-defensa" value="0" max="150"></progress>
                
                <label>Velocidad de Entrega (Speed)</label>
                <progress id="kpi-velocidad" value="0" max="150"></progress>
                
                <article style="background: rgba(255,255,255,0.05); padding: 1rem; margin-top: 1rem; text-align: center;">
                    <small>Costo Mensual (Experiencia Base)</small>
                    <h3 id="poke-costo" style="color: #4ade80; margin: 0;">$0</h3>
                </article>
            </div>
        </div>
    </div>
</article>
<br>
<br>
<article class="project-card" style="max-width: 800px; margin: 4rem auto; border: 1px solid var(--primary);">
    <header style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 1rem;">
        <div>
            <span class="tag">Simulaci√≥n de Gesti√≥n</span>
            <h3 style="margin: 0;">Alcalde Simulator 2025</h3>
        </div>
        <button id="btn-start-game" style="padding: 5px 15px; font-size: 0.8rem;">‚ñ∂ Iniciar Gesti√≥n</button>
    </header>

    <div class="grid" style="text-align: center; margin: 2rem 0;">
        
        <div style="background: rgba(16, 185, 129, 0.1); padding: 1rem; border-radius: 8px;">
            <small>Presupuesto Municipal</small>
            <h4 id="game-budget" style="color: #4ade80; margin: 0;">$0</h4>
        </div>

        <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
            <small>Aprobaci√≥n Ciudadana</small>
            <h4 id="game-approval" style="color: #60a5fa; margin: 0;">0%</h4>
        </div>

        <div style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px;">
            <small>D√≠as de Gesti√≥n</small>
            <h4 id="game-day" style="color: #a78bfa; margin: 0;">D√≠a 0</h4>
        </div>
    </div>

    <div id="game-screen" style="background: rgba(0,0,0,0.3); padding: 2rem; border-radius: 8px; min-height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
        <p id="event-text" style="font-size: 1.2rem; color: var(--muted);">Presiona Iniciar para comenzar tu mandato...</p>
        
        <div id="decision-buttons" style="display: none; gap: 1rem; margin-top: 1.5rem; flex-wrap: wrap; justify-content: center;">
            <button id="btn-opt-1" class="outline">Opci√≥n A</button>
            <button id="btn-opt-2" class="outline">Opci√≥n B</button>
        </div>
    </div>
</article>
</section>

<footer class="container" id="contacto">
    <small>Dise√±ado por Cristian Rojas ‚Ä¢ ¬© 2025</small>
    <br>
    <small style="margin-top: 1rem; display: block;">
        <a href="v1/index.html" style="color: var(--muted); text-decoration: none; opacity: 0.6;">
            <i class="fas fa-history"></i> Ver versi√≥n antigua (2020)
        </a>
    </small>
</footer>

    </main>

    <script>
// 1. VARIABLES
    const inputCapital = document.getElementById('input-capital');
    const inputTasa = document.getElementById('input-tasa');
    const inputAnos = document.getElementById('input-anos');
    const btnCalcular = document.getElementById('btn-calcular');
    const resultadoDiv = document.getElementById('resultado');
    const valorFinalSpan = document.getElementById('valor-final');
    let miGrafico; 

// --- SISTEMA DE TEMAS ALEATORIOS (CAMALE√ìN) ---
    
// --- SISTEMA DE TEMAS AVANZADO (CAMALE√ìN 2.0) ---
    
    const themes = [
        { 
            name: 'Original Purple', 
            color: '#8e44ad', 
            hover: '#9b59b6',
            overlay: 'rgba(15, 23, 42, 0.9)', // Azul muy oscuro (Original)
            bg: '#0f172a' 
        },
        { 
            name: 'Cyberpunk Pink',  
            color: '#ff00ff', 
            hover: '#ff66ff',
            overlay: 'rgba(40, 0, 40, 0.9)', // P√∫rpura oscuro
            bg: '#1a051a' // Fondo casi negro con toque rosado
        },
        { 
            name: 'Matrix Green',    
            color: '#00ff41', 
            hover: '#00cc33',
            overlay: 'rgba(0, 20, 0, 0.92)', // Negro verdoso
            bg: '#051a05' // Verde muy oscuro
        },
        { 
            name: 'Tron Blue',       
            color: '#00f2ff', 
            hover: '#00c3cc',
            overlay: 'rgba(0, 20, 40, 0.9)', // Azul ci√°n oscuro
            bg: '#05151a' 
        },
        { 
            name: 'Sith Red',        
            color: '#ff0000', 
            hover: '#ff4d4d',
            overlay: 'rgba(40, 0, 0, 0.9)', // Rojo sangre oscuro
            bg: '#1a0505'
        },
        { 
            name: 'Golden Legend',   
            color: '#ffd700', 
            hover: '#ffea00',
            overlay: 'rgba(40, 35, 0, 0.9)', // Dorado oscuro
            bg: '#1a1805'
        }
    ];

    function applyTheme(theme) {
        const root = document.documentElement;
        
        // 1. Cambiamos los colores principales (Botones, textos)
        root.style.setProperty('--primary', theme.color);
        root.style.setProperty('--primary-hover', theme.hover);
        
        // 2. Cambiamos el "Ambiente" (Fondo e Imagen del Hero)
        root.style.setProperty('--hero-overlay', theme.overlay);
        root.style.setProperty('--bg-body', theme.bg);
        
        console.log(`%c Tema: ${theme.name} `, `background: ${theme.color}; color: #000; padding: 5px;`);
    }

    // Inicializaci√≥n aleatoria
    const randomIndex = Math.floor(Math.random() * themes.length);
    applyTheme(themes[randomIndex]);
    
    // Si tienes el bot√≥n m√°gico, recuerda actualizar su listener tambi√©n para que use esta lista nueva

    // MEN√ö M√ìVIL
    const hamburger = document.querySelector(".hamburger");
    const navLinks = document.querySelector(".nav-links");
    const links = document.querySelectorAll(".nav-links li a");

    hamburger.addEventListener("click", () => {
        hamburger.classList.toggle("active");
        navLinks.classList.toggle("active");
    });
    
    links.forEach(link => {
        link.addEventListener("click", () => {
            hamburger.classList.remove("active");
            navLinks.classList.remove("active");
        });
    });

    // 2. L√ìGICA DE C√ÅLCULO Y GR√ÅFICO
    btnCalcular.addEventListener('click', () => {
        
        // A. Captura de datos
        const capital = parseFloat(inputCapital.value);
        const tasa = parseFloat(inputTasa.value);
        const anos = parseFloat(inputAnos.value);
        
        // B. Validaci√≥n
        if (isNaN(capital) || isNaN(tasa) || isNaN(anos) || capital <= 0 || tasa <= 0 || anos <= 0) {
            alert('Por favor, ingresa valores v√°lidos para todos los campos.'); 
            return;
        }

        // --- C. GENERACI√ìN DE DATOS PARA EL GR√ÅFICO ---
        const etiquetas = []; // Eje X (A√±os)
        const datos = [];     // Eje Y (Dinero)
        
        let capitalAcumulado = capital;

        // Bucle: a√±o por a√±o calculando el inter√©s
        for (let i = 0; i <= anos; i++) {
            etiquetas.push(`A√±o ${i}`);
            datos.push(capitalAcumulado);
            
            // F√≥rmula de inter√©s compuesto 
            capitalAcumulado = capitalAcumulado * (1 + tasa / 100);
        }

        // --- D. MOSTRAR RESULTADO EN TEXTO ---
        const valorfinal = datos[datos.length - 1];

        const valorFormateado = new Intl.NumberFormat('es-CL', {
            style: 'currency',
            currency: 'CLP',
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
        }).format(valorfinal);

        valorFinalSpan.innerText = valorFormateado;
        resultadoDiv.style.display = 'block';

        // --- E. DIBUJAR EL GR√ÅFICO CON CHART.JS ---
        const ctx = document.getElementById('graficoInversion').getContext('2d');

        // Si ya existe un gr√°fico anterior, se destruye para limpiar el canvas
        if (miGrafico) {
            miGrafico.destroy();
        }

        // crea el nuevo gr√°fico
        miGrafico = new Chart(ctx, {
            type: 'line', 
            data: {
                labels: etiquetas, // Los a√±os
                datasets: [{
                    label: 'Crecimiento de Capital',
                    data: datos,   // El dinero
                    borderColor: '#8e44ad', 
                    backgroundColor: 'rgba(142, 68, 173, 0.2)',
                    borderWidth: 3,
                    pointBackgroundColor: '#fff',
                    fill: true,
                    tension: 0.4 
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { labels: { color: '#cbd5e1' } }
                },
                scales: {
                    y: {
                        ticks: { color: '#94a3b8' },
                        grid: { color: 'rgba(255, 255, 255, 0.1)' }
                    },
                    x: {
                        ticks: { color: '#94a3b8' },
                        grid: { display: false }
                    }
                }
            }
        });
    });

    // --- L√ìGICA DEL POKE-KPI DASHBOARD ---
    
    // 1. Selecci√≥n de Elementos
    const pokeInput = document.getElementById('poke-input');
    const btnBuscarPoke = document.getElementById('btn-buscar-poke');
    const pokeCard = document.getElementById('poke-card');
    
    // Elementos donde pondremos la info
    const imgPoke = document.getElementById('poke-img');
    const namePoke = document.getElementById('poke-name');
    const typePoke = document.getElementById('poke-type');
    const kpiAtaque = document.getElementById('kpi-ataque');
    const kpiDefensa = document.getElementById('kpi-defensa');
    const kpiVelocidad = document.getElementById('kpi-velocidad');
    const costoPoke = document.getElementById('poke-costo');

    // 2. La Funci√≥n As√≠ncrona (Async/Await)
    btnBuscarPoke.addEventListener('click', async () => {
        
        const nombre = pokeInput.value.toLowerCase().trim();
        
        if (!nombre) {
            alert("Por favor escribe un nombre.");
            return;
        }

        try {
            // A. Pedimos los datos a la API
            const respuesta = await fetch(`https://pokeapi.co/api/v2/pokemon/${nombre}`);
            
            // Si el pokemon no existe (Error 404)
            if (!respuesta.ok) {
                alert("¬°Candidato no encontrado en la base de datos!");
                return;
            }

            // B. convierte la respuesta a JSON (Objetos de JS)
            const data = await respuesta.json();

            // C. Llenamos la tarjeta con los datos (Mapeo)
            
            // Imagen y Texto
            imgPoke.src = data.sprites.other['official-artwork'].front_default || data.sprites.front_default;
            namePoke.innerText = data.name;
            typePoke.innerText = data.types.map(t => t.type.name).join(' | ').toUpperCase();

            // KPIs (Mapeamos stats del juego a conceptos de empresa)
            // Stats array: 0:hp, 1:attack, 2:defense, 3:special-attack, 4:special-defense, 5:speed
            
            // Ataque -> Productividad
            kpiAtaque.value = data.stats[1].base_stat; 
            
            // Defensa -> Gesti√≥n de Crisis
            kpiDefensa.value = data.stats[2].base_stat;
            
            // Velocidad -> Velocidad de Entrega
            kpiVelocidad.value = data.stats[5].base_stat;

            // Base Experience -> Sueldo
            const sueldo = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' }).format(data.base_experience * 1000);
            costoPoke.innerText = sueldo;

            // D. muestra la tarjeta
            pokeCard.style.display = 'block';

        } catch (error) {
            console.error(error);
            alert("Error de conexi√≥n con el servidor de RRHH.");
        }
    });


    // --- L√ìGICA DE ALCALDE SIMULATOR 2025 ---

    // 1. REFERENCIAS AL HTML 
    const uiBudget = document.getElementById('game-budget');
    const uiApproval = document.getElementById('game-approval');
    const uiDay = document.getElementById('game-day');
    const uiText = document.getElementById('event-text');
    const uiButtons = document.getElementById('decision-buttons');
    const btnStart = document.getElementById('btn-start-game');
    const btnOpt1 = document.getElementById('btn-opt-1');
    const btnOpt2 = document.getElementById('btn-opt-2');

    // 2. CONFIGURACI√ìN INICIAL 
    let gameState = {
        budget: 100000000, // 100 Millones
        approval: 50,      // 50%
        day: 0,
        active: false,
        currentEvent: null // se guarda el problema actual
    };

    // 3. BASE DE DATOS DE CRISIS
    const crisisDeck = [
        {
            msg: "üö® ¬°Huelga de Basura! Los vecinos reclaman.",
            optA: { txt: "Negociar Bono ($15M)", cost: 15000000, effect: 10 },
            optB: { txt: "Rompehuelgas ($2M)", cost: 2000000, effect: -15 }
        },
        {
            msg: "üè´ Techo de colegio se llueve.",
            optA: { txt: "Reparaci√≥n Full ($8M)", cost: 8000000, effect: 5 },
            optB: { txt: "Poner Baldes ($0)", cost: 0, effect: -10 }
        },
        {
            msg: "üéâ Festival Comunal de Jazz.",
            optA: { txt: "Traer Artistas ($20M)", cost: 20000000, effect: 15 },
            optB: { txt: "Solo locales ($1M)", cost: 1000000, effect: 2 }
        },
        {
            msg: "üå≥ Plaga en plaza principal.",
            optA: { txt: "Fumigaci√≥n Eco ($5M)", cost: 5000000, effect: 5 },
            optB: { txt: "Cortar todo ($500k)", cost: 500000, effect: -5 }
        }
    ];

    // 4. FUNCIONES DE ACTUALIZACI√ìN VISUAL
    function updateDashboard() {
        // Formatear dinero bonito
        uiBudget.innerText = new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' }).format(gameState.budget);
        
        // Colores din√°micos para aprobaci√≥n
        uiApproval.innerText = gameState.approval + "%";
        uiApproval.style.color = gameState.approval > 50 ? '#4ade80' : '#f87171'; // Verde si >50, Rojo si no

        uiDay.innerText = "D√≠a " + gameState.day;
    }

    // 5. MOTOR DE EVENTOS 
    function triggerEvent() {
        // crisis al azar del mazo
        // Math.floor(Math.random() * cantidad) --> da un √≠ndice aleatorio
        const randomIndex = Math.floor(Math.random() * crisisDeck.length);
        const event = crisisDeck[randomIndex];
        
        // se guarda el evento actual en el estado para saber qu√© costos aplicar
        gameState.currentEvent = event;

        // se muestra el problema en pantalla
        uiText.innerText = event.msg;
        
        btnOpt1.innerText = event.optA.txt;
        btnOpt2.innerText = event.optB.txt;
        
        uiButtons.style.display = 'flex';
    }

    // 6. PROCESAR DECISI√ìN
    function handleDecision(option) {
        if (!gameState.active) return;

        const event = gameState.currentEvent;
        const choice = option === 'A' ? event.optA : event.optB;

        // A. Aplicar consecuencias matem√°ticas
        gameState.budget -= choice.cost;
        gameState.approval += choice.effect;
        gameState.day += 7; // se avanza una semana

        // B. Limitar aprobaci√≥n entre 0 y 100
        if (gameState.approval > 100) gameState.approval = 100;
        if (gameState.approval < 0) gameState.approval = 0;

        // C. Verificar Game Over
        checkGameOver();

        // D. Actualizar pantalla
        updateDashboard();
        
        // E. Preparar siguiente turno
        if (gameState.active) {
            triggerEvent(); // Lanzar otro evento inmediatamente
        }
    }

    function checkGameOver() {
        if (gameState.budget <= 0) {
            endGame("‚ùå QUEBRASTE EL MUNICIPIO. Fin del juego.");
        } else if (gameState.approval <= 10) {
            endGame("üî• DESTITUIDO POR ESTALLIDO SOCIAL. Fin del juego.");
        } else if (gameState.day >= 100) { // Si sobrevives 100 d√≠as
            endGame("üèÜ ¬°REELECTO! Gesti√≥n Exitosa.");
        }
    }

    function endGame(message) {
        gameState.active = false;
        uiText.innerText = message;
        uiText.style.color = "var(--primary)";
        uiButtons.style.display = 'none'; // Ocultar botones
        btnStart.innerText = "Reintentar";
        btnStart.style.display = "block"; // Volver a mostrar bot√≥n inicio
    }

    // 7. ESCUCHADORES DE EVENTOS
    btnStart.addEventListener('click', () => {
        // Reiniciar variables
        gameState.budget = 100000000;
        gameState.approval = 50;
        gameState.day = 1;
        gameState.active = true;
        
        btnStart.style.display = "none"; // Ocultar bot√≥n inicio
        updateDashboard();
        triggerEvent();
    });

    btnOpt1.addEventListener('click', () => handleDecision('A'));
    btnOpt2.addEventListener('click', () => handleDecision('B'));


// --- BOT√ìN M√ÅGICO AVANZADO (Con Giro) ---
const btnMagic = document.getElementById('btn-magic-theme');

if (btnMagic) {
    const iconMagic = btnMagic.querySelector('i'); // Seleccionamos el icono dentro

    btnMagic.addEventListener('click', () => {
        // 1. ANIMACI√ìN: Girar 360 grados
        iconMagic.style.transition = "transform 0.5s ease";
        iconMagic.style.transform = "rotate(360deg)";

        // Resetear el giro despu√©s de 0.5s para poder girar de nuevo
        setTimeout(() => {
            iconMagic.style.transition = "none";
            iconMagic.style.transform = "rotate(0deg)";
        }, 500);

        // 2. L√ìGICA: Elegir tema nuevo (evitando repetir el mismo color actual)
        let newIndex;
        const currentColor = getComputedStyle(document.documentElement).getPropertyValue('--primary').trim();
        
        // Bucle "do-while": Sigue buscando mientras el color elegido sea igual al actual
        do {
            newIndex = Math.floor(Math.random() * themes.length);
        } while (themes[newIndex].color.toLowerCase() === currentColor.toLowerCase());

        applyTheme(themes[newIndex]);
    });
}
    </script>

</body>
</html>